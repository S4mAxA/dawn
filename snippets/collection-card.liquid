{% comment %}
  Snippet pour afficher une carte de collection transparente
  
  Variables disponibles :
  - collection: l'objet collection
  - show_description: boolean pour afficher la description
  - show_product_count: boolean pour afficher le nombre de produits
  - variant: 'default' ou 'hero' pour le style de la carte
  - show_badge: boolean pour afficher le badge "Nouveau"
{% endcomment %}

{% assign show_description = show_description | default: true %}
{% assign show_product_count = show_product_count | default: true %}
{% assign variant = variant | default: 'default' %}
{% assign show_badge = show_badge | default: false %}

{% assign card_class = 'collection-item-card' %}
{% if variant == 'hero' %}
  {% assign card_class = card_class | append: ' collection-item-card--hero' %}
{% endif %}

<div class="{{ card_class }}">
  {% if show_badge and collection.created_at > 'now' | date: '%s' | minus: 2592000 %}
    <div class="collection-item-card__badge">Nouveau</div>
  {% endif %}
  
  <div class="collection-item-card__media">
    {% if collection.image %}
      <img 
        src="{{ collection.image | image_url: width: 400, height: 225, crop: 'center' }}"
        alt="{{ collection.title | escape }}"
        loading="lazy"
        width="400"
        height="225"
      >
    {% else %}
      <div class="collection-placeholder" style="
        background: linear-gradient(135deg, var(--surface-2), var(--surface));
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--muted);
        font-size: 0.875rem;
      ">
        {{ collection.title | escape }}
      </div>
    {% endif %}
  </div>
  
  <div class="collection-item-card__content">
    <div>
      <h3 class="collection-item-card__title">
        <a href="{{ collection.url }}" title="{{ collection.title | escape }}">
          {{ collection.title | escape }}
        </a>
      </h3>
      
      {% if show_description and collection.description != blank %}
        <div class="collection-item-card__description">
          {{ collection.description | strip_html | truncate: 120 }}
        </div>
      {% endif %}
    </div>
    
    {% if show_product_count %}
      <div class="collection-item-card__meta">
        <span class="collection-item-card__product-count">
          {{ collection.products_count }} produit{{ collection.products_count | pluralize: 's' }}
        </span>
        <span class="collection-item-card__arrow">â†’</span>
      </div>
    {% endif %}
  </div>
</div>
